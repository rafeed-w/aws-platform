# Blue/Green deployment configuration
blueGreen:
  enabled: true
  activeVersion: blue  # blue or green
  
  blue:
    replicaCount: 2
    image:
      tag: 'v1.0.0'  # Current stable version
  
  green:  
    replicaCount: 0  # 0 = inactive, 2 = active for testing
    image:
      tag: 'latest'  # New version for testing

# Legacy single deployment (when blueGreen.enabled: false)
replicaCount: 2

image:
  repository: '433058264968.dkr.ecr.us-east-2.amazonaws.com/thrive-test-applications'
  tag: 'latest'
  pullPolicy: Always

nameOverride: ''
fullnameOverride: ''

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  className: 'nginx'
  annotations:
    cert-manager.io/cluster-issuer: "selfsigned-issuer"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: webapp-tls-cert

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50
